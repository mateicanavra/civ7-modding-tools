# Scratch Pad: Per-Era Boundaries + Builds Unblock

Owner: agent-GOBI-PRR
Start: 2026-02-07

This file is the running scratch pad for the implementation stack described in:
- `docs/projects/pipeline-realism/issues/ISSUE-per-era-boundary-segmentation-and-build-unblock-2026-02-07.md`

## Notes
- Keep entries short and concrete: what changed, why, commands run, and key outcomes.
- Prefer linking to `diag:dump` directories rather than pasting large tables inline.

## Timeline

### 2026-02-07
- Created issue doc + scratch pad as the working checklist.
- Slice s117: updated `map-morphology/build-elevation` to restore plotted terrain snapshot after engine `buildElevation()` and to resync water caches via `stampContinents()` + `storeWaterData()`. Added a mock drift regression test.
- Slice s118: Mapgen Studio now self-heals missing `mod-swooper-maps` studio recipe artifacts in `apps/mapgen-studio` dev/build via a preflight script. Added a short Studio runbook.
- Slice s119: added an era plate membership payload (`plateIdByEra`) to `foundation.tectonicHistory` by advecting plate seeds using plate velocities and assigning cells via deterministic multi-source Dijkstra.
- Slice s120: re-evaluated boundary segmentation per era by re-running `foundation/compute-tectonic-segments` against `plateIdByEra[era]` and building era fields from era-specific segments (disables seed drift to avoid double-displacement).
- Slice s121: classified convergent events as collision vs. subduction based on crust type on each side of the boundary, rather than using "polarity is set" as a proxy.
- Slice s122: anchored newest-era plate membership to the current plate graph (`plateGraph.cellToPlate`) so present-day boundaries match exactly; older eras still drift via advection.
