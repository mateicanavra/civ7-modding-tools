# s90 â€” Final legacy + docs cleanup sweep

This slice is the forward-only lock-in: re-run the enforcement gates, ensure no shadow/dual/compare drift, and ensure repo-tracked execution docs are complete and truthy.

PR:
- https://app.graphite.com/github/pr/mateicanavra/civ7-modding-tools/1157

## Gates / Checks (final posture)
```bash
bun run --cwd mods/mod-swooper-maps check
bun run --cwd mods/mod-swooper-maps test
bun run --cwd mods/mod-swooper-maps test test/pipeline/no-shadow-paths.test.ts
bun run --cwd mods/mod-swooper-maps test test/pipeline/determinism-suite.test.ts
```

## Evidence

### Dump
```bash
bun run --cwd mods/mod-swooper-maps diag:dump -- 106 66 1337 --label s90-final-sweep
```
```json
{"runId":"65efcd0dd9265a2c0b07561720946a8e9d1fa49e493512a9f7b82b36229036ac","outputDir":"/Users/mateicanavra/Documents/.nosync/DEV/worktrees/wt-agent-GOBI-PRR-milestone-no-legacy-foundation-morphology/mods/mod-swooper-maps/dist/visualization/s90-final-sweep/65efcd0dd9265a2c0b07561720946a8e9d1fa49e493512a9f7b82b36229036ac"}
```

### Analyze
```bash
bun run --cwd mods/mod-swooper-maps diag:analyze -- <outputDir>
```
```json
{
  "runA": {
    "runId": "65efcd0dd9265a2c0b07561720946a8e9d1fa49e493512a9f7b82b36229036ac",
    "dir": "/Users/mateicanavra/Documents/.nosync/DEV/worktrees/wt-agent-GOBI-PRR-milestone-no-legacy-foundation-morphology/mods/mod-swooper-maps/dist/visualization/s90-final-sweep/65efcd0dd9265a2c0b07561720946a8e9d1fa49e493512a9f7b82b36229036ac",
    "landmasks": [
      {
        "stepId": "mod-swooper-maps.standard.morphology-coasts.landmass-plates",
        "dataTypeKey": "morphology.topography.landMask",
        "pctLand": 0.3570611778158948,
        "landComponents": 4,
        "largestLandFrac": 0.5796637309847879
      },
      {
        "stepId": "mod-swooper-maps.standard.morphology-erosion.geomorphology",
        "dataTypeKey": "morphology.topography.landMask",
        "pctLand": 0.3570611778158948,
        "landComponents": 4,
        "largestLandFrac": 0.5796637309847879
      }
    ]
  }
}
```

### Spot-check layers
```bash
bun run --cwd mods/mod-swooper-maps diag:list -- <outputDir> --dataTypeKey foundation.crustTiles.type
```
```json
{
  "layers": [
    {
      "dataTypeKey": "foundation.crustTiles.type",
      "stats": { "min": 0, "max": 1 }
    }
  ]
}
```

```bash
bun run --cwd mods/mod-swooper-maps diag:list -- <outputDir> --dataTypeKey morphology.topography.landMask
```
```json
{
  "layers": [
    {
      "dataTypeKey": "morphology.topography.landMask",
      "stepId": "mod-swooper-maps.standard.morphology-coasts.landmass-plates",
      "stats": { "min": 0, "max": 1 }
    },
    {
      "dataTypeKey": "morphology.topography.landMask",
      "stepId": "mod-swooper-maps.standard.morphology-erosion.geomorphology",
      "stats": { "min": 0, "max": 1 }
    }
  ]
}
```
