# s91 — Rift-driven craton growth landmask + foundation mesh resolution controls

This follow-up slice strengthens the “physically grounded” posture for landmass generation by:
- Adding a deterministic, time-stepped (eras × steps) rift/fracture + plate-motion driven craton growth term into landmask continent potential.
- Ensuring Foundation `resolutionProfile` ordering is monotonic (fine/ultra are not coarser than balanced), and exposing mesh knobs in advanced config (`cellsPerPlate`, `relaxationSteps`).

PR:
- (pending submit)

## Gates / Checks
```bash
bun run --cwd mods/mod-swooper-maps check
bun run --cwd mods/mod-swooper-maps test
bun run --cwd mods/mod-swooper-maps test test/pipeline/no-shadow-paths.test.ts
bun run --cwd mods/mod-swooper-maps test test/pipeline/determinism-suite.test.ts
```

## Evidence (canonical probe 106 66 1337)

### Baseline dump (s90)
```bash
bun run --cwd mods/mod-swooper-maps diag:dump -- 106 66 1337 --label s91-baseline
```
```json
{"runId":"65efcd0dd9265a2c0b07561720946a8e9d1fa49e493512a9f7b82b36229036ac","outputDir":"/Users/mateicanavra/Documents/.nosync/DEV/worktrees/wt-agent-GOBI-PRR-milestone-no-legacy-foundation-morphology/mods/mod-swooper-maps/dist/visualization/s91-baseline/65efcd0dd9265a2c0b07561720946a8e9d1fa49e493512a9f7b82b36229036ac"}
```

### After dump (s91)
```bash
bun run --cwd mods/mod-swooper-maps diag:dump -- 106 66 1337 --label s91-after
```
```json
{"runId":"d2cbd4077c5a8ff73c7fd9a3120a09636463725ef1e6451ed3cd992895de49b9","outputDir":"/Users/mateicanavra/Documents/.nosync/DEV/worktrees/wt-agent-GOBI-PRR-milestone-no-legacy-foundation-morphology/mods/mod-swooper-maps/dist/visualization/s91-after/d2cbd4077c5a8ff73c7fd9a3120a09636463725ef1e6451ed3cd992895de49b9"}
```

### Compare analyze (baseline vs after)
```bash
bun run --cwd mods/mod-swooper-maps diag:analyze -- <baselineOutputDir> <afterOutputDir>
```
```json
{
  "runA": {
    "landmasks": [
      {
        "stepId": "mod-swooper-maps.standard.morphology-coasts.landmass-plates",
        "pctLand": 0.3570611778158948,
        "landComponents": 4,
        "largestLandFrac": 0.5796637309847879
      },
      {
        "stepId": "mod-swooper-maps.standard.morphology-erosion.geomorphology",
        "pctLand": 0.3570611778158948,
        "landComponents": 4,
        "largestLandFrac": 0.5796637309847879
      }
    ]
  },
  "runB": {
    "landmasks": [
      {
        "stepId": "mod-swooper-maps.standard.morphology-coasts.landmass-plates",
        "pctLand": 0.37507146941109204,
        "landComponents": 3,
        "largestLandFrac": 0.5316310975609756
      },
      {
        "stepId": "mod-swooper-maps.standard.morphology-erosion.geomorphology",
        "pctLand": 0.37507146941109204,
        "landComponents": 3,
        "largestLandFrac": 0.5316310975609756
      }
    ]
  },
  "diff": {
    "landmaskLayerDiffs": [
      {
        "stepId": "mod-swooper-maps.standard.morphology-coasts.landmass-plates",
        "hamming": 372,
        "hammingPct": 0.05317324185248713
      },
      {
        "stepId": "mod-swooper-maps.standard.morphology-erosion.geomorphology",
        "hamming": 372,
        "hammingPct": 0.05317324185248713
      }
    ]
  }
}
```

### Spot-check layers
```bash
bun run --cwd mods/mod-swooper-maps diag:list -- <outputDir> --dataTypeKey foundation.crustTiles.type
```
```json
{
  "layers": [
    {
      "dataTypeKey": "foundation.crustTiles.type",
      "stats": { "min": 0, "max": 1 }
    }
  ]
}
```

```bash
bun run --cwd mods/mod-swooper-maps diag:list -- <outputDir> --dataTypeKey morphology.topography.landMask
```
```json
{
  "layers": [
    {
      "dataTypeKey": "morphology.topography.landMask",
      "stepId": "mod-swooper-maps.standard.morphology-coasts.landmass-plates",
      "stats": { "min": 0, "max": 1 }
    },
    {
      "dataTypeKey": "morphology.topography.landMask",
      "stepId": "mod-swooper-maps.standard.morphology-erosion.geomorphology",
      "stats": { "min": 0, "max": 1 }
    }
  ]
}
```

